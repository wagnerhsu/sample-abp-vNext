module.exports=function(e){function r(t){if(n[t])return n[t].exports;var a=n[t]={exports:{},id:t,loaded:!1};return e[t].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}({0:function(e,r,n){n(1646),e.exports=n(1646)},3:function(e,r){e.exports=function(){throw Error("define cannot be used indirect")}},20:function(e,r){e.exports=require("../kendo.core")},1646:function(e,r,n){var t,a,o;!function(i,define){a=[n(20)],t=i,o="function"==typeof t?t.apply(r,a):t,!(void 0!==o&&(e.exports=o))}(function(){!function(){window.kendo.pivotgrid=window.kendo.pivotgrid||{},window.kendo.pivotgrid.common=function(e){function r(e,r){var t,a="",o="";for(t=e.length-1;t>=0;t--)o="SELECT (",o+=n(e[t]),o+=") ON 0",t===e.length-1?(o+=" FROM ["+r+"]",a=o):a=o+" FROM ( "+a+" )";return a}function n(e){var r="",n=e.value+"",a=e.field,o=e.operator;return o===V["in"]?(r+="{",r+=n,r+="}"):(r+=o===V.neq||o===V.doesnotcontain?"-":"",r+="Filter(",r+=a+".MEMBERS",r+=t(b[o],a,n),r+=")"),r}function t(e){var r,n=[];for(r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.forEach(function(r,n){e=e.replace(RegExp("\\{"+n+"\\}","g"),r)}),e}function a(e,r,n){var t,a,o,A,d,O,p,I,f="";if(e=e||[],t=l(e),a=t.expanded,o=i(t.root),A=[],d=a.length,O=0,I=[],o.length>1||r.length>1){for(A.push(c(o,r));O<d;O++)p=s(a[O].name,n),I=u(p,o),A.push(c(I,r));f+=A.join(",")}else{for(;O<d;O++)p=s(a[O].name,n),I.push(p[0]);f+=o.concat(I).join(",")}return f}function o(e){var r,n,t=e.length,a=[];for(n=0;n<t;n++)r=e[n],a.push(void 0!==r.name?r.name:r);return a}function i(e){var r=[];return e.forEach(function(e){var n=e.name[0],t=d(n);r.some(function(e){return 0===e.indexOf(t)})||r.push(n)}),r}function l(e){for(var r,n,t,a,o,i,l=[],u=[],c=[],s=0;s<e.length;s++)if(n=e[s],t=n.name,r=!1,t.length>1)u.push(n);else{for(a=d(t[0]),o=0,i=c.length;o<i;o++)if(0===c[o].name[0].indexOf(a)){r=!0;break}r||c.push(n),n.expand&&l.push(n)}return l=l.concat(u),{expanded:l,root:c}}function u(e,r){var n,t,a,o,i=r.length;for(r=r.slice(0),n=0;n<e.length;n++)for(t=e[n],a=0;a<i;a++)if(o=d(r[a]),t.indexOf(o)!==-1){r[a]=t;break}return r}function c(e,r){var n=e.slice(0);return r.length>1&&n.push("{"+o(r).join(",")+"}"),O(n)}function s(e,r){var n=e.length-1,t=e[n],a=A(r,t);return a&&a.dir?t="ORDER("+t+".Children,"+a.field+".CurrentMember.MEMBER_CAPTION,"+a.dir+")":t+=".Children",e[n]=t,e}function A(e,r){for(var n=0,t=e.length;n<t;n++)if(0===r.indexOf(e[n].field))return e[n];return null}function d(e){var r=e.split(".");return r.length>2?r[0]+"."+r[1]:e}function O(e){var r,n="CROSSJOIN({";return e.length>2?(r=e.pop(),n+=O(e)):(n+=e.shift(),r=e.pop()),n+="},{",n+=r,n+="})"}function p(e){var n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>',t=e.columnAxes,i=void 0===t?[]:t,l=e.rowAxes,u=void 0===l?[]:l,c=e.measureAxes,s=void 0===c?[]:c,A=e.sort,d=void 0===A?[]:A,O=e.filter,p=void 0===O?[]:O,I="rows"===e.measuresAxis;return n+="SELECT NON EMPTY {",!i.length&&u.length&&(!s.length||s.length&&I)&&(i=u,u=[],I=!1),i.length||u.length||(I=!1),i.length?n+=a(i,I?[]:s,d):s.length&&!I&&(n+=o(s).join(",")),n+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(u.length||I&&s.length>1)&&(n+=", NON EMPTY {",n+=u.length?a(u,I?s:[],d):o(s).join(","),n+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),p.length?(n+=" FROM ",n+="(",n+=r(p,e.connection.cube),n+=")"):n+=" FROM ["+e.connection.cube+"]",1===s.length&&i.length&&(n+=" WHERE ("+o(s).join(",")+")"),n+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>",n.replace(/&/g,"&amp;")}function I(e,r,n,t){function a(e){return e instanceof n?e:new n(function(r){r(e)})}return new(n||(n=Promise))(function(n,o){function i(e){try{u(t.next(e))}catch(r){o(r)}}function l(e){try{u(t["throw"](e))}catch(r){o(r)}}function u(e){e.done?n(e.value):a(e.value).then(i,l)}u((t=t.apply(e,r||[])).next())})}function f(e,r){function n(e){return function(r){return t([e,r])}}function t(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o["return"]:n[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=r.call(e,u)}catch(t){n=[6,t],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,l,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l}function m(){var e,r,n,t,a,o,i,l;for(e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;for(t=Array(e),a=0,r=0;r<n;r++)for(o=arguments[r],i=0,l=o.length;i<l;i++,a++)t[a]=o[i];return t}function N(e){var r,n,t=(new DOMParser).parseFromString(e,"text/xml"),a=Array.from(t.querySelectorAll("Axis")),o=Array.from(t.querySelectorAll("CellData > Cell")).map(function(e){return{fmtValue:_(e,"FmtValue"),ordinal:parseInt(e.getAttribute("CellOrdinal"),10),value:_(e,"Value")}}),i={tuples:[]},l={tuples:[]},u=[];return a.forEach(function(e){if("SlicerAxis"!==e.getAttribute("name")){var r=0===i.tuples.length?i.tuples:l.tuples;Array.prototype.push.apply(r,T(e))}}),r=Array(l.tuples.length*i.tuples.length).fill(null),o.forEach(function(e){r[e.ordinal]=e}),n=0,l.tuples.forEach(function(e){i.tuples.forEach(function(t){u.push({columnTuple:t,data:r[n],rowTuple:e}),n++})}),{columns:i,data:u,rows:l}}function _(e,r){var n=e.querySelector(r);return n?n.textContent:""}function T(e){var r=Array.from(e.querySelectorAll("Tuple"));return r.map(function(e){var r=Array.from(e.querySelectorAll("Member")),n=r.map(function(e){var r=parseInt(_(e,"LNum")||"0",10),n=parseInt(_(e,"CHILDREN_CARDINALITY")||"0",10)>0;return{caption:_(e,"Caption"),children:[],hasChildren:n,hierarchy:e.getAttribute("Hierarchy"),levelName:_(e,"LName"),levelNum:r,name:_(e,"UName"),parentName:_(e,"PARENT_UNIQUE_NAME")}});return{members:n}})}function R(e){var r={},n='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return n+="<RequestType>"+(H[e.command]||e.command)+"</RequestType>",n+="<Restrictions>"+h("RestrictionList",e.restrictions,!0)+"</Restrictions>",e.connection&&e.connection.catalog&&(r.Catalog=e.connection.catalog),n+="<Properties>"+h("PropertyList",r,!1)+"</Properties>",n+="</Discover></Body></Envelope>"}function h(e,r,n){var t,a,o="";if(r){o+="<"+e+">",t=void 0;for(a in r)r[a]&&(t=r[a],n&&(a=a.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),o+="<"+a+">"+t+"</"+a+">");o+="</"+e+">"}else o+="<"+e+"/>";return o}function E(e){var r=(new DOMParser).parseFromString(e,"text/xml"),n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:_(e,"CUBE_NAME"),caption:_(e,"CUBE_CAPTION"),description:_(e,"DESCRIPTION"),type:_(e,"CUBE_TYPE")}});return n}function C(e){var r=(new DOMParser).parseFromString(e,"text/xml"),n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:_(e,"CATALOG_NAME"),description:_(e,"DESCRIPTION")}});return n}function y(e){var r=(new DOMParser).parseFromString(e,"text/xml"),n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:_(e,"MEASURE_NAME"),caption:_(e,"MEASURE_CAPTION"),uniqueName:_(e,"MEASURE_UNIQUE_NAME"),description:_(e,"DESCRIPTION"),aggregator:_(e,"MEASURE_AGGREGATOR"),groupName:_(e,"MEASUREGROUP_NAME"),displayFolder:_(e,"MEASURE_DISPLAY_FOLDER"),defaultFormat:_(e,"DEFAULT_FORMAT_STRING")}});return n}function v(e){var r=(new DOMParser).parseFromString(e,"text/xml"),n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:_(e,"KPI_NAME"),uniqueName:_(e,"KPI_NAME"),caption:_(e,"KPI_CAPTION"),value:_(e,"KPI_VALUE"),goal:_(e,"KPI_GOAL"),status:_(e,"KPI_STATUS"),trend:_(e,"KPI_TREND"),statusGraphic:_(e,"KPI_STATUS_GRAPHIC"),trendGraphic:_(e,"KPI_TREND_GRAPHIC"),description:_(e,"KPI_DESCRIPTION"),groupName:_(e,"MEASUREGROUP_NAME"),type:"kpi"}});return n}function x(e){var r=(new DOMParser).parseFromString(e,"text/xml"),n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{caption:_(e,"DIMENSION_CAPTION"),defaultHierarchy:_(e,"DEFAULT_HIERARCHY"),description:_(e,"DESCRIPTION"),name:_(e,"DIMENSION_NAME"),type:parseInt(_(e,"DIMENSION_TYPE"),10),uniqueName:_(e,"DIMENSION_UNIQUE_NAME")}});return n}function P(e){var r=(new DOMParser).parseFromString(e,"text/xml"),n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:_(e,"HIERARCHY_NAME"),caption:_(e,"HIERARCHY_CAPTION"),description:_(e,"DESCRIPTION"),uniqueName:_(e,"HIERARCHY_UNIQUE_NAME"),dimensionUniqueName:_(e,"DIMENSION_UNIQUE_NAME"),displayFolder:_(e,"HIERARCHY_DISPLAY_FOLDER"),origin:_(e,"HIERARCHY_ORIGIN"),defaultMember:_(e,"DEFAULT_MEMBER")}});return n}function M(e){var r=(new DOMParser).parseFromString(e,"text/xml"),n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:_(e,"LEVEL_NAME"),caption:_(e,"LEVEL_CAPTION"),description:_(e,"DESCRIPTION"),uniqueName:_(e,"LEVEL_UNIQUE_NAME"),dimensionUniqueName:_(e,"DIMENSION_UNIQUE_NAME"),displayFolder:_(e,"LEVEL_DISPLAY_FOLDER"),orderingProperty:_(e,"LEVEL_ORDERING_PROPERTY"),origin:_(e,"LEVEL_ORIGIN"),hierarchyUniqueName:_(e,"HIERARCHY_UNIQUE_NAME")}});return n}function S(e){var r=(new DOMParser).parseFromString(e,"text/xml"),n=Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map(function(e){return{name:_(e,"MEMBER_NAME"),caption:_(e,"MEMBER_CAPTION"),uniqueName:_(e,"MEMBER_UNIQUE_NAME"),dimensionUniqueName:_(e,"DIMENSION_UNIQUE_NAME"),hierarchyUniqueName:_(e,"HIERARCHY_UNIQUE_NAME"),levelUniqueName:_(e,"LEVEL_UNIQUE_NAME"),childrenCardinality:_(e,"CHILDREN_CARDINALITY")}});return n}function g(e){var r,n,t,a=[];for(r=0,n=Object.keys(e);r<n.length;r++)t=n[r],a.push({name:JSON.parse(t),expand:e[t]});return a}function U(e){return JSON.parse(JSON.stringify(e))}function D(e){var r=e.name;return[ae(r,e.value,"value"),ae(r,e.goal,"goal"),ae(r,e.status,"status"),ae(r,e.trend,"trend")]}var F,G,w,b={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"'},V={doesnotcontain:"doesnotcontain","in":"in",neq:"neq"},L=function(){return L=Object.assign||function(e){var r,n,t,a;for(n=1,t=arguments.length;n<t;n++){r=arguments[n];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},L.apply(this,arguments)},H={schemaCatalogs:"DBSCHEMA_CATALOGS",schemaCubes:"MDSCHEMA_CUBES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaKPIs:"MDSCHEMA_KPIS",schemaLevels:"MDSCHEMA_LEVELS",schemaMeasures:"MDSCHEMA_MEASURES",schemaMembers:"MDSCHEMA_MEMBERS"},k={schemaCatalogs:C,schemaCubes:E,schemaDimensions:x,schemaHierarchies:P,schemaKPIs:v,schemaLevels:M,schemaMeasures:y,schemaMembers:S},q=function(e,r){return I(void 0,void 0,void 0,function(){var n,t,a;return f(this,function(o){switch(o.label){case 0:return n=L({body:p(r),headers:{"Content-Type":"text/xml"},method:"POST"},e.init),[4,fetch(e.url,n)];case 1:return t=o.sent(),[4,t.text()];case 2:return a=o.sent(),[2,N(a)]}})})},B=function(e,r){return I(void 0,void 0,void 0,function(){var n,t,a;return f(this,function(o){switch(o.label){case 0:return n=L({body:R(r),headers:{"Content-Type":"text/xml"},method:"POST"},e.init),[4,fetch(e.url,n)];case 1:return t=o.sent(),[4,t.text()];case 2:return a=o.sent(),[2,k[r.command](a)]}})})},Y=function(e){var r={columns:e.columns.tuples,data:e.data,rows:e.rows.tuples};return r},K=function(e,r){void 0===r&&(r=[]),e.sort=r},Q=function(e,r){void 0===r&&(r=[]),e.filter=r},X=function(e,r){return void 0===r&&(r=new Set),(e.children||[]).forEach(function(e){r.add(e.levelName),X(e,r)}),r.size},j=function(e){var r=0;return(e.children||[]).forEach(function(e){r+=j(e)||1}),r},z=function(e,r){return(r&&r.hierarchy===e.hierarchy?m((r.normalizedPath||[]).slice(0,-1),[e.name||null]):m(r&&r.normalizedPath?r.normalizedPath:[],[e.name])).filter(Boolean)},Z=function(e,r){return(r&&r.hierarchy===e.hierarchy?m((r.path||[]).slice(0,-1),[(0===e.levelNum?e.hierarchy:e.name)||null]):m(r&&r.path?r.path:[],[0===e.levelNum?e.hierarchy:e.name])).filter(Boolean)},W=function(e,r,n,t,a,o,i,l){var u,c,s,A,d,O,p,I,f,m,N,_,T,R;if(void 0===r&&(r=-1),void 0===n&&(n=0),void 0===t&&(t=void 0),void 0===a&&(a=void 0),void 0===o&&(o=void 0),void 0===i&&(i=void 0),void 0===l&&(l=void 0),u=X(e),c=j(e),s=t||u,A=a||c,d=o?o.slice():[],O=i?i.slice():Array(A),p=d.findIndex(function(r){return r&&r.name===e.levelName&&r.level===e.levelNum}),I=d[p],f={name:e.levelName,level:e.levelNum,index:r,cells:Array(A).fill(null)},m=r!==-1&&n!==-1,N={caption:e.caption,name:e.name,levelName:e.levelName,levelNum:e.levelNum,hasChildren:e.hasChildren,parentName:e.parentName,hierarchy:e.hierarchy,total:void 0!==e.total&&e.total||l&&l.children.length<=1&&l.total,parent:l,rowIndex:r,colIndex:n,depth:1,breadth:1,path:e.path||[],normalizedPath:e.normalizedPath||[],children:e.children.filter(function(r){return r.hierarchy===e.hierarchy})},m)if(I)I.cells[n]=N,I.index>=r&&(r=I.index);else if(d[r]&&d[r].cells.length){for(_=r;_<d.length;_++)T=d[_],T.index++;d.splice(r,0,f),d[r].cells[n]=N}else d[r]=f,d[r].cells[n]=N;return R=0,e.children&&e.children.length?e.children.forEach(function(e){var t=W(e,r+1,n+R,s,A,d,O,N),a=t[0],o=t[1],i=t[3];R+=i||1,d=a.slice(),O=o.slice()}):e.normalizedPath&&(O[n]={total:N.total,path:e.normalizedPath}),N.depth=u,N.breadth=c,[d,O,u,c]},J=function(e,r,n){var t,a,o,i,l;for(void 0===r&&(r=null),void 0===n&&(n=0),a=L(L({},e),{total:!0,hasChildren:!1,children:[]}),o=0;o<e.children.length;o++)i=J(e.children[o],e,o),t=t||i.hierarchy,i.hierarchy===t||!r||r.children.some(function(e){return e.total&&e.name===a.name})||e.total||(a.children.push(i),e.children.splice(o,1),o--);return e.children.filter(function(e){return!e.total}).length>=1&&r&&!r.children.some(function(e){return e.total&&e.name===a.name})&&!e.total&&(l=e.children[0].hierarchy,e.hierarchy===l&&r.children.splice(n+1,0,a)),e},$=function(e){var r,n={children:[]},t={},a=function(r){var a,o=U(e[r]),i="",l=function(e){var r,a,l,u=o.members[e];n.children&&0===n.children.length?r=n:t[i]&&!t[i+u.name]&&0===u.levelNum?r=t[i]:t[i+u.parentName]&&u.levelNum>0&&!t[i+u.parentName+u.name]?r=t[i+u.parentName]:!t[i+u.parentName]&&u.levelNum>0&&!t[i+u.parentName+u.name]&&(a=Object.keys(t).find(function(e){return 0===e.indexOf(u.hierarchy)&&e.lastIndexOf(i+u.parentName)+(i+u.parentName).length===e.length}),a&&(r=t[a])),r&&(u.path=Z(u,r),u.normalizedPath=z(u,r),l=r.children.findIndex(function(e){return e.hierarchy!==r.hierarchy}),l!==-1?r.children.splice(Math.max(l,0),0,u):r.children.push(u)),i+=u.parentName+=u.name,t[i]||(t[i]=u)};for(a=0;a<o.members.length;a++)l(a)};for(r=0;r<e.length;r++)a(r);return U(J(n))},ee=function(e,r,n,t,a){var o=Array.from(Array(a),function(){return{cells:Array.from(Array(t),function(){return null})}}),i=function(e){return e.join("|")},l=function(e){return e.members.map(function(e){return e.name})},u=new Map,c=new Map;return r.forEach(function(e,r){u.set(i(e.path),r)}),n.forEach(function(e,r){c.set(i(e.path),r)}),e.forEach(function(e){var r=u.get(i(l(e.columnTuple))),t=c.get(i(l(e.rowTuple)));void 0!==r&&void 0!==t&&(o[t].cells[r]||(o[t].row=n[t].path,o[t].cells[r]=e))}),o},re=function(e,r,n,t){var a,o,i,l=Array(t);for(a=0;a<t;a++)for(o=0;o<n;o++)e[o]&&e[o].cells[a]&&(i=e[o].cells[a],l[a]||(l[a]={cells:Array(n).fill(null)}),l[a].cells[o]=L(L({},i),{rowSpan:i.colSpan,colSpan:i.rowSpan}));return[l,r,t,n]},ne=function(e){var r,n,t,a,o=W(e),i=o[0],l=o[1],u=o[2],c=o[3];for(r=0;r<c;r++)for(n=null,t=0;t<u;t++)i[t]&&(a=i[t].cells[r],!a&&n&&(n.rowSpan=(n.rowSpan||1)+1),n&&(n.colSpan=n.breadth||1),a&&(n=a));return[i,l,u,c]},te=function(e){var r,n,t,a,o=W(e),i=o[0],l=o[1],u=o[2],c=o[3];for(r=0;r<c;r++)for(n=null,t=0;t<u;t++)i[t]&&(a=i[t].cells[r],!a&&n&&(n.rowSpan=(n.rowSpan||1)+1),n&&(n.colSpan=n.breadth),a&&(n=a));return re(i,l,u,c)},ae=function(e,r,n){return{hierarchyUniqueName:e,uniqueName:r,caption:r,measure:r,name:r,type:n,kpi:!0}},oe=function(e){for(var r,n=0;n<e.length;n++)if(2===e[n].type){r=!0;break}r&&e.splice(n+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})},ie=function(e,r){return e.name+""==[r.defaultHierarchy?r.defaultHierarchy:r.uniqueName]+""},le=function(e,r){return e.name+""==r.name+""};return e.HEADERS_ACTION=void 0,function(e){e.toggle="HEADERS_ACTION_TOGGLE",e.expand="HEADERS_ACTION_EXPAND",e.collapse="HEADERS_ACTION_COLLAPSE"}(e.HEADERS_ACTION||(e.HEADERS_ACTION={})),F=function(e,r,n){var t=new Set;return e.children.forEach(function(e){var a=r(e);n&&t.add(e.path+""),F(e,r,n||a).map(function(e){t.add(e)})}),Array.from(t.values())},G=function(r,n){var t,a,o,i;switch(n.type){case e.HEADERS_ACTION.toggle:return t=r.find(function(e){return e.name+""==n.payload+""}),G(r,L(L({},n),{type:t&&t.expand?e.HEADERS_ACTION.collapse:e.HEADERS_ACTION.expand}));case e.HEADERS_ACTION.expand:return a=r.find(function(e){return e.name+""==n.payload+""}),a&&a.expand===!0?r:!a||a.expand!==!1&&void 0!==a.expand?m(r,[{name:n.payload,expand:!0}]):r.map(function(e){return e===a?L(L({},a),{expand:!0}):e});case e.HEADERS_ACTION.collapse:return o=F(n.tree,function(e){return!e.total&&e.path+""==n.payload+""}),i=m(r).filter(function(e){return!o.some(function(r){return r===e.name+""})}).map(function(e){return L(L({},e),{expand:!!e.expand})}).map(function(e){return e.name+""==n.payload+""?n.payload.length>1?void 0:{name:n.payload,expand:!1}:e}).filter(Boolean);default:return r}},e.PIVOT_CONFIGURATOR_ACTION=void 0,function(e){e.toggleSelection="PIVOT_CONFIGURATOR_ACTION_TOGGLE_SELECTION",e.addColumnAxis="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXIS",e.addColumnAxes="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXES",e.removeColumnAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXIS",e.removeColumnAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXES",e.addRowAxis="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXIS",e.addRowAxes="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXES",e.removeRowAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXIS",e.removeRowAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXES",e.addMeasureAxis="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXIS",e.addMeasureAxes="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXES",e.removeMeasureAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXIS",e.removeMeasureAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXES",e.remove="PIVOT_CONFIGURATOR_ACTION_REMOVE",e.setSort="PIVOT_CONFIGURATOR_ACTION_SET_SORT",e.setFilter="PIVOT_CONFIGURATOR_ACTION_SET_FILTER",e.addFilter="PIVOT_CONFIGURATOR_ACTION_ADD_FILTER",e.changeFilter="PIVOT_CONFIGURATOR_ACTION_CHANGE_FILTER",e.removeFilter="PIVOT_CONFIGURATOR_ACTION_REMOVE_FILTER",e.setDragItem="PIVOT_CONFIGURATOR_ACTION_SET_DRAGITEM",e.drop="PIVOT_CONFIGURATOR_ACTION_DROP",e.setDropZone="PIVOT_CONFIGURATOR_ACTION_SET_DROP_ZONE",e.setDropTarget="PIVOT_CONFIGURATOR_ACTION_SET_DROP_TARGET",e.setDropDirection="PIVOT_CONFIGURATOR_ACTION_SET_DROP_DIRECTION"}(e.PIVOT_CONFIGURATOR_ACTION||(e.PIVOT_CONFIGURATOR_ACTION={})),w=function(r,n){var t,a,o,i,l,u,c,s,A,d,O,p,I,f,N,_,T;switch(n.type){case e.PIVOT_CONFIGURATOR_ACTION.toggleSelection:if(!Array.isArray(n.payload))return d=n.payload,2===d.type||"aggregator"in d?r.measureAxes.some(function(e){return ie(e,d)})?w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis})):w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis})):"kpi"===d.type?(O=D(d),O.every(function(e){return r.measureAxes.some(function(r){return ie(r,e)})})?w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes,payload:O})):w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes,payload:O.filter(function(e){return!r.measureAxes.some(function(r){return ie(r,e)})})}))):n.payload.kpi?r.measureAxes.some(function(e){return ie(e,d)})?w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis})):w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis})):r.columnAxes.some(function(e){return ie(e,d)})?w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis})):r.rowAxes.some(function(e){return ie(e,d)})?w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.removeRowAxis})):!r.columnAxes||!r.columnAxes.length||r.rowAxes&&r.rowAxes.length?w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.addColumnAxis})):w(r,L(L({},n),{type:e.PIVOT_CONFIGURATOR_ACTION.addRowAxis}));break;case e.PIVOT_CONFIGURATOR_ACTION.addColumnAxis:a=m(r.columnAxes||[],[{name:[n.payload.defaultHierarchy||n.payload.uniqueName]}]);break;case e.PIVOT_CONFIGURATOR_ACTION.addColumnAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.removeColumnAxis:a=m((r.columnAxes||[]).filter(function(e){return!ie(e,n.payload)}));break;case e.PIVOT_CONFIGURATOR_ACTION.removeColumnAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.addRowAxis:t=m(r.rowAxes||[],[{name:[n.payload.defaultHierarchy||n.payload.uniqueName]}]);break;case e.PIVOT_CONFIGURATOR_ACTION.addRowAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.removeRowAxis:t=m((r.rowAxes||[]).filter(function(e){return!ie(e,n.payload)}));break;case e.PIVOT_CONFIGURATOR_ACTION.removeRowAxes:break;case e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxis:o=m(r.measureAxes||[],[{name:[n.payload.defaultHierarchy||n.payload.uniqueName]}]);break;case e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis:o=m((r.measureAxes||[]).filter(function(e){return!ie(e,n.payload)}));break;case e.PIVOT_CONFIGURATOR_ACTION.addMeasureAxes:o=m(r.measureAxes||[],(n.payload||[]).map(function(e){return{name:[e.defaultHierarchy||e.uniqueName]}}));break;case e.PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes:o=m((r.measureAxes||[]).filter(function(e){return!n.payload.some(function(r){return ie(e,r)})}));break;case e.PIVOT_CONFIGURATOR_ACTION.remove:r.columnAxes.some(function(e){return le(e,n.payload)})&&(a=m(r.columnAxes.filter(function(e){return!le(e,n.payload)}))),r.rowAxes.some(function(e){return le(e,n.payload)})&&(t=m(r.rowAxes.filter(function(e){return!le(e,n.payload)}))),r.measureAxes.some(function(e){return le(e,n.payload)})&&(o=m(r.measureAxes.filter(function(e){return!le(e,n.payload)})));break;case e.PIVOT_CONFIGURATOR_ACTION.setDragItem:u=n.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setDropZone:c=n.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setDropTarget:A=n.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setDropDirection:s=n.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.drop:if(r.dragItem&&r.dropZone)switch(p=r.columnAxes.find(function(e){return le(e,n.payload)}),I=r.rowAxes.find(function(e){return le(e,n.payload)}),f=r.measureAxes.find(function(e){return le(e,n.payload)}),N=void 0,p&&(N=p,a=m(r.columnAxes.filter(function(e){return!le(e,n.payload)}))),I&&(N=I,t=m(r.rowAxes.filter(function(e){return!le(e,n.payload)}))),f&&(N=f,o=m(r.measureAxes.filter(function(e){return!le(e,n.payload)}))),r.dropZone){case"columnAxes":a=a||r.columnAxes.slice(),_=-1,r.dropTarget&&r.dropDirection&&(T=r.dropDirection?"before"===r.dropDirection?0:1:0,_=a.findIndex(function(e){return le(e,r.dropTarget)})+T),_>=0?a.splice(_,0,N):a.push(N);break;case"rowAxes":t=t||r.rowAxes.slice(),_=-1,r.dropTarget&&r.dropDirection&&(T=r.dropDirection?"before"===r.dropDirection?0:1:0,_=t.findIndex(function(e){return le(e,r.dropTarget)})+T),_>=0?t.splice(_,0,N):t.push(N);break;case"measureAxes":o=o||r.measureAxes.slice(),_=-1,r.dropTarget&&r.dropDirection&&(T=r.dropDirection?"before"===r.dropDirection?0:1:0,_=o.findIndex(function(e){return le(e,r.dropTarget)})+T),_>=0?o.splice(_,0,N):o.push(N)}u=null,c=null,A=null;break;case e.PIVOT_CONFIGURATOR_ACTION.setSort:i=n.payload;break;case e.PIVOT_CONFIGURATOR_ACTION.setFilter:l=Array.isArray(n.payload)?n.payload:[n.payload];break;case e.PIVOT_CONFIGURATOR_ACTION.addFilter:l=(r.filter||[]).slice(),Array.isArray(n.payload)?l.push.apply(l,n.payload):l.push(n.payload);break;case e.PIVOT_CONFIGURATOR_ACTION.changeFilter:l=(r.filter||[]).map(Array.isArray(n.payload)?function(e){return n.payload.some(function(r){return r.field===e.field})?n.payload.find(function(r){return r.field===e.field}):e}:function(e){return e.field===n.payload.field?n.payload:e});break;case e.PIVOT_CONFIGURATOR_ACTION.removeFilter:l=(r.filter||[]).slice(),l=l.filter(Array.isArray(n.payload)?function(e){return!n.payload.some(function(r){return r.field===e.field&&r.operator===e.operator})}:function(e){return!(e.field===n.payload.field&&e.operator===n.payload.operator)})}return{dragItem:u,dropTarget:A,dropDirection:s,dropZone:c,columnAxes:a,rowAxes:t,measureAxes:o,filter:l,sort:i}},e.addKPI=oe,e.buildKPIMeasures=D,e.compareAxes=le,e.configuratorReducer=w,e.createAxisDescriptors=g,e.createDataState=Y,e.createDiscoverBody=R,e.createRequestBody=p,e.discoverCommands=H,e.fetchData=q,e.fetchDiscover=B,e.headersReducer=G,e.parseResponse=N,e.setFilter=Q,e.setSort=K,e.toColumns=ne,e.toData=ee,e.toRows=te,e.toTree=$,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}()},n(3))}});