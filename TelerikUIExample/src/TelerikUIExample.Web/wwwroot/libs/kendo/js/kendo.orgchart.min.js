module.exports=function(t){function e(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}({0:function(t,e,a){t.exports=a(1374)},3:function(t,e){t.exports=function(){throw Error("define cannot be used indirect")}},1124:function(t,e){t.exports=require("./kendo.menu")},1224:function(t,e){t.exports=require("./kendo.window")},1267:function(t,e){t.exports=require("./kendo.upload")},1275:function(t,e){t.exports=require("./kendo.dialog")},1374:function(t,e,a){var i,n,r;!function(o,define){n=[a(1375),a(1376),a(1124),a(1275),a(1377),a(1267),a(1224)],i=o,r="function"==typeof i?i.apply(e,n):i,!(void 0!==r&&(t.exports=r))}(function(){return function(t,e){var a=window.kendo,i=a.ui.DataBoundWidget,n=a.data.OrgChartDataSource,r=a.ui.ContextMenu,o=t.extend,s=t.proxy,d=Array.isArray,c=".kendoOrgChart",u="cancel",l="change",h="click",p="collapse",f="create",g="dataBinding",m="dataBound",v="delete",w="destroy",_="edit",k="error",b="expand",y="focus",S="kendoKeydown",x="menu",C="progress",I="save",D="select",q="requestStart",E=".",H=" ",M=",",O="id",F="uid",T="action",W={wrapper:"k-orgchart",container:"k-orgchart-container",line:"k-orgchart-line",lineVertical:"k-orgchart-line-v",lineHorizontal:"k-orgchart-line-h",lineVerticalTop:"k-orgchart-line-v-top",group:"k-orgchart-group",groupVertical:"k-orgchart-group-v",groupHorizontal:"k-orgchart-group-h",nodesGroup:"k-orgchart-node-group",nodesGroupContainer:"k-orgchart-node-group-container",nodeContainer:"k-orgchart-node-container",node:"k-orgchart-node",card:"k-orgchart-card",cardMenu:"k-orgchart-card-menu",button:"k-orgchart-button",focused:"k-state-focus",plusIcon:"k-i-plus",menuItem:"k-item",avatarPreview:"k-orgchart-avatar-preview",update:"k-orgchart-update",cancel:"k-orgchart-cancel",vstack:"k-vstack",hstack:"k-hstack",closeButton:"k-i-close"},P={edit:"<li data-action='edit'>#: edit #</li>",create:"<li data-action='create'>#: create #</li>",destroy:"<li data-action='destroy'>#: destroy #</li>"},B='<div><div class="k-orgchart-node-group-title">#: value #</div><div class="k-orgchart-node-group-subtitle">#: field #</div></div>',j='<div class="k-orgchart-avatar-preview k-hstack k-align-items-center k-pb-lg"><div class="k-avatar k-avatar-solid-primary k-avatar-solid k-avatar-lg k-rounded-full"><span class="k-avatar-image"><img src="#: avatar #" alt="#: name #"></span></div><div class="k-px-md">#: fileName #</div><button class="k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button" aria-label="#: destroy #"><span class="k-button-icon k-icon k-i-delete"></span></button></div>',A='<div class="k-edit-buttons"><button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-orgchart-cancel"><span class="k-button-text">#: cancel #</span></button><button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-orgchart-update"><span class="k-button-text">#: save #</span></button></div>',V=i.extend({init:function(t,e,n){d(e)&&(e={dataSource:e}),e=e||{},i.fn.init.call(this,t,e),n&&(this._events=n),this._wrapper(),this._view(),this._dataSource(),this._contextMenu(),this.options.autoBind&&this.dataSource.fetch(),a.notify(this)},options:{name:"OrgChart",autoBind:!0,cardsColors:null,dataSource:{},editable:{create:!0,destroy:!0,fields:!0,form:{buttonsTemplate:"",orientation:"vertical"},parent:!0},groupField:null,groupHeaderTemplate:B,template:null,messages:{label:"Org Chart",edit:"Edit",create:"Create",destroy:"Delete",destroyContent:"Are you sure you want to delete this item and all its children?",destroyTitle:"Delete item",cancel:"Cancel",save:"Save",menuLabel:"Edit menu",uploadAvatar:"Upload new avatar",parent:"Parent",name:"Name",title:"Title",none:"--None--",expand:"expand",collapse:"collapse"}},events:[u,l,p,f,g,m,v,_,b,S,I,D],destroy:function(){this._menu&&this._menu.destroy(),this._editWindow&&this._editWindow.destroy(),this._confirmDestroy&&this._confirmDestroy.destroy(),this.view.destroy(),i.fn.destroy.call(this),this.wrapper.off(c)},setDataSource:function(t){this.options.dataSource=t,this._dataSource(),this.options.autoBind&&t.fetch()},setOptions:function(t){var e=this;i.fn.setOptions.call(e,t)},append:function(t,e){var a=this,i=a.view.jqueryItemElement(e),n=a.dataItem(i);i&&n&&(n.loaded()?(a.dataSource.add(o({},t,{parentId:n.id})),a.dataSource.sync()):a.dataSource.read({id:n.id}).then(function(){a.dataSource.add(o({},t,{parentId:n.id})),a.dataSource.sync()}))},cancelChanges:function(){this.dataSource.hasChanges()&&this.dataSource.cancelChanges()},collapse:function(t){return this.view.collapse(t)},dataItem:function(t){var e=this.view.jqueryItemElement(t);if(e&&e.data(F))return this.dataSource.getByUid(e.data(F))},"delete":function(t){var e=this.view.jqueryItemElement(t);e&&(this.dataSource.remove(this.dataItem(e)),this.dataSource.sync())},edit:function(t){var e=this.view.jqueryItemElement(t),a=this.dataItem(e);e&&a&&this._edit(a)},expand:function(t){return this.view.expand(t)},getCollapsedNodes:function(){return this.wrapper.find("[aria-expanded='false']")},items:function(){return this.wrapper.find(E+W.card)},parent:function(t){var e,a=this.view.jqueryItemElement(t);if(a)return e=a.closest(E+W.group).attr(O),this.wrapper.find("[aria-owns='"+e+"']")},saveChanges:function(){this.dataSource.sync()},select:function(t){var a=this.view._getToSelect(t);return a?this.view.select(a):e},_avatarPreview:function(t,e){var i,n,r=this._form,o=t.avatar,s=function(){i.find(E+W.avatarPreview).remove(),t.set("avatar",null)};r&&(e||(e=o.split("\\").pop().split("/").pop(),e&&e.indexOf(".")!=-1||(e=t.name)),n={name:t.name,avatar:o,fileName:e,destroy:this.options.messages.destroy},i=r.wrapper,i.find(E+W.avatarPreview).remove(),i.find('[type="file"]').closest(E+"k-form-field").prepend(a.template(j)(n)),i.find(E+W.avatarPreview+H+E+"k-button").on(h,s))},_contextMenu:function(){var t,e=this.options,i=e.editable,n=e.messages,o={target:this.wrapper,filter:E+W.cardMenu,select:this._onMenuItemClick.bind(this),activate:this._onMenuOpen.bind(this),deactivate:this._onMenuClose.bind(this),showOn:"click",animation:!1};(i===!0||i!==!1&&(i.create||i.destroy||i.fields||i.parent))&&(t="<ul>",i===!0?(t+=P.edit,t+=P.create,t+=P.destroy):((i.fields||i.parent)&&(t+=P.edit),i.create&&(t+=P.create),i.destroy&&(t+=P.destroy)),t=a.template(t)(n),this._menu=new r(t,o))},_dataSource:function(){var t=this.dataSource,e=this.options.dataSource;t&&(t.unbind(l,this._dataSourceChangeHandler),t.unbind(k,this._errorHandler),t.unbind(C,this._progressHandler),t.unbind(q,this._requestStartHandler)),this._dataSourceChangeHandler=s(this._onDataSourceChange,this),this._errorHandler=s(this._onDataSourceError,this),this._progressHandler=s(this._progress,this),this._requestStartHandler=s(this._onDataSourceRequestStart,this),t=this.dataSource=n.create(e),t.bind(l,this._dataSourceChangeHandler),t.bind(k,this._errorHandler),t.bind(C,this._progressHandler),t.bind(q,this._requestStartHandler),this.view.dataSource=t},_destroyItem:function(e){var i=this,n=t("<div></div>"),r=i.options.messages,o=function(){i.wrapper.find(E+W.card+"[tabindex=0]"+M+E+W.nodesGroup+"[tabindex=0]").addClass(W.focused).trigger("focus")},s=this._confirmDestroy=new a.ui.Confirm(n,{title:r.destroyTitle,content:r.destroyContent,messages:{okText:r.destroy,cancel:r.cancel},show:function(){setTimeout(function(){s.element.trigger("focus")})}});s.open(),s.result.done(function(){i.trigger(v,{dataItem:e})||(i.dataSource.remove(e),i.dataSource.sync()),i.view._shouldRestoreSelection=!0,i.view._restoreSelection()}),s.result.fail(o)},_edit:function(e){var i,n=this,r=t("<div>"),o=t("<div>"),s=this.options.messages,d=this._formOptions(e);d&&(n._form=new a.ui.Form(r,d),e.avatar&&n._avatarPreview(e),o.append(r),n._editWindow=new a.ui.Window(o,{title:s.edit,width:"380 px",modal:!0,close:function(t){i?i=!1:n.trigger(u,{dataItem:e})?t.preventDefault():n.cancelChanges()},deactivate:function(){o.off(h),n._editWindow.destroy(),n._editWindow=null,n.view._restoreSelection()}}),o.append(a.template(A)({save:s.save,cancel:s.cancel})),n._editWindow.center().open(),o.on(h,E+W.update,function(){n._form.validate()&&(i=!0,n.trigger(I,{dataItem:e})||(n._editWindow.close(),n.saveChanges()))}),o.on(h,E+W.cancel,function(){n._editWindow.close()}))},_formOptions:function(t){var e,a,i=this.options,n=i.messages,r=i.editable.form,d=[];return r&&(a=r.items),a&&0!==a.length||!(i.editable===!0||i.editable&&i.editable.parent)||(e=[{id:null,name:n.none}].concat(this.dataSource.prospectParents(t)),d.push({field:"parentId",editor:"DropDownList",label:n.parent,editorOptions:{dataSource:e,dataValueField:"id",dataTextField:"name",valuePrimitive:!0}})),a&&0!==a.length||!(i.editable===!0||i.editable&&i.editable.fields)||(d=d.concat([{field:"name",label:n.name,validation:{required:!0}},{field:"title",label:n.title},{field:"avatar",label:n.uploadAvatar,editor:s(this._uploadEditor,this,t)}])),r&&delete r.formData,!!(d.length>0||a&&a.length>0)&&o(!0,{},{formData:t,items:d},r)},_onDataSourceChange:function(t){if(!("add"===t.action||"itemchange"===t.action&&this._editWindow)){if((!t.action||"sync"===t.action)&&this.trigger(g,t))return this._progress(!1),e;this._progress(!0),this.view.refresh(),t.action&&"sync"!==t.action||this.trigger(m),this._progress(!1)}},_onDataSourceError:function(){this._progress(!1)},_onDataSourceRequestStart:function(){this.view._cacheFocused()},_onMenuClose:function(){0===t(document.activeElement).closest("[role='alertdialog']").length&&this.wrapper.find("[tabindex='0']").addClass(W.focused).trigger("focus")},_onMenuItemClick:function(e){var a,i=this,n=t(e.target).closest(E+W.node).find(E+W.card),r=i.dataItem(n),o=t(e.item).data(T);r&&(o===_?i.trigger(_,{dataItem:r})||i._edit(r):o===f?i.trigger(f,{dataItem:r})||(r.loaded()?(a=i.dataSource.add({parentId:r.id}),i._edit(a)):i.dataSource.read({id:r.id}).then(function(){a=i.dataSource.add({parentId:r.id}),i._edit(a)})):o===w&&i._destroyItem(r))},_onMenuOpen:function(){this.view._cacheFocused(),this.wrapper.find(E+W.focused).removeClass(W.focused),this._menu.element.find(E+W.menuItem).first().trigger(y)},_openMenu:function(t){this._menu&&this._menu.open(t.find(E+W.cardMenu))},_progress:function(t){a.ui.progress(this.container,t)},_triggerCollapse:function(t){this.trigger(p,{item:t.item,dataItems:t.dataItems})&&t.preventDefault()},_triggerExpand:function(t){this.trigger(b,{item:t.item,dataItems:t.dataItems})&&t.preventDefault()},_triggerSelect:function(t){this.trigger(D,{item:t.item,dataItems:t.dataItems})||(this.view.select(t.item),this.trigger(l,{item:t.item,dataItems:t.dataItems}))},_uploadEditor:function(e,a){var i=this;t('<input type="file">').appendTo(a).kendoUpload({async:!1,multiple:!1,select:function(t){var a=t.files[0],n=a.rawFile,r=new FileReader;a.validationErrors&&a.validationErrors.length>0||n&&(r.onloadend=function(){e.set("avatar",this.result),i._avatarPreview(e,n.name)},r.readAsDataURL(n))},validation:{allowedExtensions:[".gif",".jpg",".png"],maxFileSize:1048576}})},_view:function(){this.view=null!==this.options.groupField&&this.options.groupField!==e?new a.orgChart.GroupedView(this.container,this.options):new a.orgChart.SingleView(this.container,this.options),this.view.bind(D,s(this._triggerSelect,this)),this.view.bind(b,s(this._triggerExpand,this)),this.view.bind(p,s(this._triggerCollapse,this)),this.view.bind(x,s(this._openMenu,this))},_wrapper:function(){var e=t("<div class='k-orgchart-container'>");this.wrapper=this.element,this.container=e,this.wrapper.addClass(W.wrapper),this.wrapper.append(e)}});a.ui.plugin(V)}(window.kendo.jQuery),window.kendo},a(3))},1375:function(t,e){t.exports=require("./orgchart/data")},1376:function(t,e){t.exports=require("./orgchart/view")},1377:function(t,e){t.exports=require("./kendo.form")}});