module.exports=function(e){function t(a){if(i[a])return i[a].exports;var o=i[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}({0:function(e,t,i){e.exports=i(1265)},3:function(e,t){e.exports=function(){throw Error("define cannot be used indirect")}},1071:function(e,t){e.exports=require("./kendo.dropdownlist")},1265:function(e,t,i){var a,o,n;!function(r,define){o=[i(1266),i(1071),i(1267),i(1268)],a=r,n="function"==typeof a?a.apply(t,o):a,!(void 0!==n&&(e.exports=n))}(function(){return function(e,t){function i(e,t,i){var a,o;e.on("dragenter"+g,function(){t(),o=new Date,a||(a=setInterval(function(){var e=new Date-o;e>100&&(i(),clearInterval(a),a=null)},100))}).on("dragover"+g,function(){o=new Date})}function a(e,i){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+i}function o(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}function n(e,t){var i=e[t];return c(i)?i.from||i.field||t:i}var r,s,l=window.kendo,d=l.ui.Widget,c=e.isPlainObject,u=e.proxy,p=e.extend,f=l.support.placeholder,h=l.isFunction,k=/(^\/|\/$)/g,m="change",v="apply",w="error",b="click",g=".kendoFileBrowser",_=".kendoSearchBox",y="name",x="size",S="type",F={field:S,dir:"asc"},B=l.template('<div class="k-listview-item k-listview-item-empty"><span class="k-file-preview"><span class="k-file-icon k-icon k-i-none"></span></span><span class="k-file-name">${text}</span></div>'),T='<div class="k-widget k-filebrowser-toolbar k-toolbar k-floatwrap"># if (showCreate) { #<button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button"><span class="k-i-button-icon k-icon k-i-folder-add"></span></button># } ## if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-upload-button"><span class="k-button-icon k-icon k-i-plus"></span><span class="k-button-text">#=messages.uploadFile#</span><input type="file" name="file" /></div></div># } ## if (showDelete) { #<button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-disabled"><span class="k-button-icon k-icon k-i-close"></span></button># } #<div class="k-tiles-arrange"><label>#=messages.orderBy#: <select></select></label></div><span class="k-toolbar-spacer"></span><input data-role="searchbox" /></div>';p(!0,l.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),p(!0,l.data,{transports:{filebrowser:l.data.RemoteTransport.extend({init:function(t){l.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,i){i.data=e.extend({},i.data,{path:this.options.path()}),h(this.options[t])?this.options[t].call(this,i):l.data.RemoteTransport.fn[t].call(this,i)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),r=d.extend({init:function(e,t){var i=this;t=t||{},d.fn.init.call(i,e,t),i.element.addClass("k-filebrowser"),i.element.on(b+g,".k-filebrowser-toolbar button:not(.k-disabled):has(.k-i-close)",u(i._deleteClick,i)).on(b+g,".k-filebrowser-toolbar button:not(.k-disabled):has(.k-i-folder-add)",u(i._addClick,i)).on("keydown"+g,".k-listview-item.k-state-selected input",u(i._directoryKeyDown,i)).on("blur"+g,".k-listview-item.k-state-selected input",u(i._directoryBlur,i)),i._dataSource(),i.refresh(),i.path(i.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[w,m,v],destroy:function(){var e=this;d.fn.destroy.call(e),e.dataSource.unbind(w,e._errorHandler),e.element.add(e.list).add(e.toolbar).off(g),l.destroy(e.element)},value:function(){var e,t=this,i=t._selectedItem(),o=t.options.transport.fileUrl;if(i&&"f"===i.get(S))return e=a(t.path(),i.get(y)).replace(k,""),o&&(e=h(o)?o(e):l.format(o,encodeURIComponent(e))),e},_selectedItem:function(){var e=this.listView,t=e.select();if(t.length)return this.dataSource.getByUid(t.attr(l.attr("uid")))},_toolbar:function(){var t=this,i=l.template(T),a=t.options.messages,o=[{text:a.orderByName,value:"name"},{text:a.orderBySize,value:"size"}];t.toolbar=e(i({messages:a,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:a.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:u(t._fileUpload,t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:o,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t.searchBox=t.toolbar.find("input[data-role='searchbox']").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var t=this;t.options.transport.uploadUrl&&(i(e(document.documentElement),e.proxy(t._dropEnter,t),e.proxy(t._dropLeave,t)),t._scrollHandler=u(t._positionDropzone,t))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+g,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+g,this._scrollHandler)},_positionDropzone:function(){var e=this,t=e.element,i=t.offset();e.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(i).css({width:t[0].clientWidth,height:t[0].clientHeight,lineHeight:t[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this,t=e.listView.select(),i=l.format(e.options.messages.deleteFile,t.find(".k-file-name").text());t.length&&e._showMessage(i,"confirm")&&e.listView.remove(t)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){return n(this.dataSource.reader.model.fields,e)},_fileUpload:function(e){var t,i=this,a=i.options,o=a.fileTypes,n=RegExp(("("+o.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),r=e.files[0].name,s=e.files[0].size,d=y,c=x;n.test(r)?(e.data={path:i.path()},t=i._createFile(r,s),t?i.upload.one("success",function(e){var a=i._insertFileToList(t);a._override&&(a.set(d,e.response[i._getFieldName(d)]),a.set(c,e.response[i._getFieldName(c)]),i.listView.dataSource.pushUpdate(a)),i._tiles=i.listView.items().filter("["+l.attr("type")+"=f]")}):e.preventDefault()):(e.preventDefault(),i._showMessage(l.format(a.messages.invalidFileType,r,o)))},_findFile:function(e){var t,i,a,o=this.dataSource.data(),n=S,r=y;for(e=e.toLowerCase(),t=0,a=o.length;t<a;t++)if("f"===o[t].get(n)&&o[t].get(r).toLowerCase()===e){i=o[t];break}return i},_createFile:function(e,t){var i=this,a={},o=S,n=i._findFile(e);return n?i._showMessage(l.format(i.options.messages.overwriteFile,e),"confirm")?(n._override=!0,n):null:(a[o]="f",a[y]=e,a[x]=t,a)},_insertFileToList:function(e){var t,i,a,o,n;if(e._override)return e;for(i=this.dataSource,a=i.view(),o=0,n=a.length;o<n;o++)if("f"===a[o].get(S)){t=o;break}return i.insert(++t,e)},createDirectory:function(){var e,t,i=this,a=0,o=S,n=y,r=i.dataSource.data(),s=i._nameDirectory(),d=new i.dataSource.reader.model;for(e=0,t=r.length;e<t;e++)"d"===r[e].get(o)&&(a=e);d.set(o,"d"),d.set(n,s),i.listView.one("dataBound",function(){var e=i.listView.items().filter("["+l.attr("uid")+"="+d.uid+"]");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){i.listView.element.find(".k-edit-item input").select()})}).one("save",function(e){var t=e.model.get(n);t?e.model.set(n,i._nameExists(t,d.uid)?i._nameDirectory():t):e.model.set(n,s)}),i.dataSource.insert(++a,d)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var i,a,o=this.dataSource.data(),n=S,r=y;for(i=0,a=o.length;i<a;i++)if("d"===o[i].get(n)&&o[i].get(r).toLowerCase()===e.toLowerCase()&&o[i].uid!==t)return!0;return!1},_nameDirectory:function(){var t,i,a,o="New folder",n=this.dataSource.data(),r=[],s=S,l=y;for(i=0,a=n.length;i<a;i++)"d"===n[i].get(s)&&n[i].get(l).toLowerCase().indexOf(o.toLowerCase())>-1&&r.push(n[i].get(l));if(e.inArray(o,r)>-1){i=2;do t=o+" ("+i+")",i++;while(e.inArray(t,r)>-1);o=t}return o},orderBy:function(e){this.dataSource.sort([{field:S,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:y,operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<div class="k-filemanager-listview" />').appendTo(t.element).on("dblclick"+g,".k-listview-item",u(t._dblClick,t)),t.listView=new l.ui.ListView(t.list,{layout:"flex",flex:{direction:"row",wrap:"wrap"},dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-i-close").parent().addClass("k-disabled"),"remove"!==e.action&&"sync"!==e.action||(e.preventDefault(),l.ui.progress(t.listView.content,!1))},dataBound:function(){t.dataSource.view().length?t._tiles=this.items().filter("["+l.attr("type")+"=f]"):this.content.append(B({text:t.options.messages.emptyFolder}))},change:u(t._listViewChange,t)})},_dblClick:function(t){var i,o=this,n=e(t.currentTarget);n.hasClass("k-edit-item")&&o._directoryBlur(),n.filter("["+l.attr("type")+"=d]").length?(i=o.dataSource.getByUid(n.attr(l.attr("uid"))),i&&(o.path(a(o.path(),i.get(y))),o.breadcrumbs.value("/"+o.path()))):n.filter("["+l.attr("type")+"=f]").length&&o.trigger(v)},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-i-close").parent().removeClass("k-disabled"),this.trigger(m,{selected:e}))},_dataSource:function(){var e,t=this,i=t.options,a=i.transport,o=p({},F),n={field:y,dir:"asc"},r={type:a.type||"filebrowser",sort:[o,n]};c(a)&&(a.path=u(t.path,t),r.transport=a),c(i.schema)?r.schema=i.schema:a.type&&c(l.data.schemas[a.type])&&(e=l.data.schemas[a.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(w,t._errorHandler):t._errorHandler=u(t._error,t),t.dataSource=l.data.DataSource.create(r).bind(w,t._errorHandler)},_navigation:function(){var t=this,i=e('<div class="k-floatwrap"><nav></nav></div>').appendTo(this.element);t.breadcrumbs=i.find("nav").first().kendoBreadcrumb({editable:!0,gap:50,value:t.options.path||"/",change:function(){t.path(this.value())}}).data("kendoBreadcrumb")},_error:function(e){var t,i,a=this;a.trigger(w,e)||(t=e.xhr.status,"error"==e.status?"404"==t?a._showMessage(a.options.messages.directoryNotFound):"0"!=t&&a._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&a._showMessage("Error! Server timeout."),i=a.dataSource,i.hasChanges()&&i.cancelChanges())},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){var e=this;e._navigation(),e._toolbar(),e._content()},_editTmpl:function(){var e='<div class="k-listview-item k-state-selected" '+l.attr("uid")+'="#=uid#" ';return e+=l.attr("type")+'="${'+S+'}">',e+="#if("+S+' == "d") { #',e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>',e+="#}else{#",e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-loading"></span></div>',e+="#}#",e+="#if("+S+' == "d") { #',e+='<span class="k-file-name"><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input class="k-input-inner" '+l.attr("bind")+'="value:'+y+'"/></span></span>',e+="#}#",e+="</div>",u(l.template(e),{sizeFormatter:o})},_itemTmpl:function(){var e='<div class="k-listview-item" '+l.attr("uid")+'="#=uid#" ';return e+=l.attr("type")+'="${'+S+'}">',e+="#if("+S+' == "d") { #',e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>',e+="#}else{#",e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-file"></span></div>',e+="#}#",e+='<span class="k-file-name">${'+y+"}</span>",e+="#if("+S+' == "f") { # <span class="k-file-size">${this.sizeFormatter('+x+")}</span> #}#",e+="</div>",u(l.template(e),{sizeFormatter:o})},path:function(e){var i=this,a=i._path||"";return e!==t?(i._path=e.replace(k,"")+"/",i.dataSource.read({path:i._path}),t):(a&&(a=a.replace(k,"")),"/"===a||""===a?"":a+"/")}}),s=d.extend({init:function(e,t){var i=this;t=t||{},d.fn.init.call(i,e,t),f&&i.element.attr("placeholder",i.options.label),i._wrapper(),i.element.on("keydown"+_,u(i._keydown,i)).on("change"+_,u(i._updateValue,i)),i.wrapper.on(b+_,"a",u(i._click,i)),f||i.element.on("focus"+_,u(i._focus,i)).on("blur"+_,u(i._blur,i))},options:{name:"SearchBox",label:"Search",value:""},events:[m],destroy:function(){var e=this;e.wrapper.add(e.element).add(e.label).off(_),d.fn.destroy.call(e)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this,t=e.element.val();t!==e.value()&&(e.value(t),e.trigger(m))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){f||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,i=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input-inner"),i.length||(i=t.wrap(e('<div class="k-widget k-search-wrap"><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"></span></div>')).parents(".k-search-wrap"),f||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<span class="k-input-suffix"><a href="#" class="k-icon k-i-zoom k-search"/></span>').appendTo(i.find(".k-textbox"))),this.wrapper=i,this.label=i.find(">label")},value:function(e){var i=this;return e!==t?(i.options.value=e,i.element.val(e),i._toggleLabel(),t):i.options.value}}),l.ui.plugin(r),l.ui.plugin(s)}(window.kendo.jQuery),window.kendo},i(3))},1266:function(e,t){e.exports=require("./kendo.listview")},1267:function(e,t){e.exports=require("./kendo.upload")},1268:function(e,t){e.exports=require("./kendo.breadcrumb")}});